<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Penal - ImersiON Roleplay</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Vari√°veis de Cores (Azul ImersiON S√≥breo/Escuro) */
        :root {
            --bg-deep-dark: #121212;      
            --bg-main-light: #181818; 
            --bg-dark-card: #202020; 
            --text-blue: #00aaff; /* Azul ImersiON */
            --text-light-grey: #e0e0e0;   
            --text-dark-grey: #aaaaaa;    
            --border-color-dark: #333333; 
            --hover-bg: #2a2a2a;            
            --alert-red: #dc3545; 
            --input-bg: #2b2b2b; 
            --input-border: #444444; 
            --calc-result-bg: #1e1e1e; 
            --crime-header-bg: #2c2c2c; 
            --crime-header-text: #e0e0e0; 
            --original-red: #ca193a;
            --main-font: 'Montserrat', sans-serif;
            --shadow-light: rgba(0, 0, 0, 0.3);
        }

        /* Estilos Globais e Reset */
        body {
            font-family: var(--main-font);
            background-color: var(--bg-main-light);
            color: var(--text-light-grey);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column; 
            min-height: 100vh;
            overflow-x: hidden;
            font-weight: 400;
        }

        .main-wrapper {
            display: flex;
            width: 100%;
            flex: 1;
        }

        /* --- √Årea de Conte√∫do Principal (Central) --- */
        .content-area {
            flex-grow: 1;
            padding: 0 40px 40px 40px; 
            background-color: var(--bg-main-light);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        
        /* --- Estilo do Cabe√ßalho da Calculadora (Topo) --- */
        .quadrotopo {
            display: flex;
            align-items: center; /* Centraliza verticalmente o conte√∫do */
            justify-content: flex-start; 
            padding: 20px 0;
            margin-bottom: 30px; 
            background-color: var(--bg-dark-card); 
            border-bottom: 3px solid var(--text-blue); 
            border-radius: 0 0 10px 10px;
            box-shadow: 0 4px 15px var(--shadow-light);
        }
        .corp-header {
            flex: 0 0 auto;
            text-align: left;
            padding: 0 30px; 
            border-right: 1px solid var(--border-color-dark);
            height: 100%;
            margin-right: 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .corp-header h2 {
            font-size: 1.6em;
            font-weight: 700;
            color: var(--text-blue);
            margin-bottom: 0;
            margin-top: 0;
        }
        .corp-header span {
            font-size: 1.1em;
            font-weight: 400;
            color: var(--text-light-grey);
            display: block;
        }

        .quadrotopo h3 {
            color: var(--text-light-grey);
            font-size: 1em;
            margin-bottom: 5px;
            font-weight: 600;
        }
        .quadrotopo input[type="text"], .quadrotopo input[type="number"] {
            width: 250px; 
            padding: 10px 12px;
            background-color: var(--input-bg);
            border: 1px solid var(--input-border);
            border-radius: 6px; 
            color: var(--text-light-grey);
            font-size: 1em;
            box-sizing: border-box;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.4);
        }
        
        /* Layout dos inputs principais */
        .input-group-item {
            flex: 0 0 auto;
            margin: auto 15px; 
        }
        
        /* Bot√£o C√≥digo Penal */
        .btn-penal {
            background-color: var(--text-blue);
            color: #fff;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            font-family: var(--main-font);
            font-weight: 700;
            font-size: 0.9em;
            cursor: pointer;
            transition: background 0.2s, transform 0.1s;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 10px rgba(0, 170, 255, 0.3);
            margin-left: 10px;
        }
        .btn-penal:hover {
            background-color: #0088cc;
            transform: translateY(-2px);
        }
        .btn-penal:active {
            transform: translateY(0);
        }

        /* Container de Valores Adicionais (Valores Adv/Policial) */
        .value-display-container {
            flex: 0 0 auto;
            margin-left: 20px; 
            padding-right: 20px; 
            border-right: 1px solid var(--border-color-dark);
            text-align: right;
            padding: 10px 20px 10px 0;
        }
        .value-row {
            margin-bottom: 5px;
        }
        .value-row label {
            font-size: 0.9em;
            color: var(--text-dark-grey);
            font-weight: 500;
            display: block;
        }
        .value-row span {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-blue); 
            display: block;
        }
        
        /* Bot√µes de M√≠dia Social */
        .social-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto; /* Empurra o bloco para o extremo direito */
            margin-right: 30px;
        }
        .social-buttons a {
            color: var(--text-light-grey);
            background-color: var(--input-bg);
            padding: 10px 12px;
            border-radius: 6px;
            text-decoration: none;
            transition: background-color 0.2s;
        }
        .social-buttons a:hover {
            background-color: var(--hover-bg);
            color: var(--text-blue);
        }
        .social-buttons i {
            font-size: 1.3em;
        }


        /* --- Corpo da Calculadora (Tr√™s Colunas + Coluna de Resultado) --- */
        #calculatorView {
            display: flex;
            gap: 30px; 
            flex: 1;
        }
        .crime-columns {
            display: flex;
            flex: 1;
            gap: 20px;
        }
        .quadro.body-forms {
            flex: 1 1 30%; 
            background-color: var(--bg-dark-card);
            padding: 20px; 
            border-radius: 8px;
            border: 1px solid var(--border-color-dark) !important;
            box-shadow: 0 4px 10px var(--shadow-light);
            min-height: 400px; 
        }
        .quadro.body-forms hr {
            border-top: 1px solid var(--border-color-dark);
            margin: 15px 0;
        }
        .quadro.body-forms h3 {
            background-color: var(--crime-header-bg) !important;
            border-radius: 6px;
            padding: 12px 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        .quadro.body-forms font {
            color: var(--crime-header-text) !important;
            font-size: 1em;
            font-weight: 600;
        }
        .checkbox-container {
            display: flex;
            align-items: flex-start;
            padding: 7px 0;
            font-size: 0.9em;
            color: var(--text-dark-grey);
        }
        .checkbox-container input[type="checkbox"] {
            margin-top: 3px; 
            margin-right: 10px;
            accent-color: var(--text-blue);
            min-width: 18px;
            height: 18px;
        }
        .checkbox-container label {
            flex-grow: 1;
            line-height: 1.4;
            color: var(--text-dark-grey);
            cursor: pointer;
        }
        .checkbox-container input:checked + label {
            color: var(--text-light-grey);
            font-weight: 500;
        }
        .checkbox-container .btn {
            display: none; 
        }

        /* --- Coluna de Resultados (Direita) --- */
        .quadro.result-column {
            flex: 0 0 300px; 
            background-color: var(--calc-result-bg) !important;
            border-radius: 8px !important;
            padding: 25px;
            box-shadow: 0 4px 15px var(--shadow-light);
            color: white;
            border: 1px solid var(--border-color-dark) !important;
        }
        .quadro.result-column h3 {
            font-weight: 700;
            font-size: 1.2em;
            color: var(--text-light-grey);
            margin-top: 20px;
        }
        .quadro.result-column h4 {
            font-weight: 600;
            font-size: 1em;
            color: var(--text-blue);
            margin-top: 15px;
        }
        .quadro.result-column input[type="text"] {
            padding: 12px;
            background-color: var(--input-bg);
            border: 1px solid var(--text-blue); 
            border-radius: 6px;
            color: var(--text-blue);
            font-size: 1.3em;
            font-weight: 700;
            text-align: right;
            box-shadow: 0 0 5px rgba(0, 170, 255, 0.3);
        }
        .quadro.result-column button {
            width: 100%;
            padding: 12px;
            margin-top: 20px;
            font-size: 1.1em;
            font-weight: 700;
            border-radius: 6px;
        }
        .quadro.result-column textarea {
            background-color: var(--input-bg);
            border: 1px solid var(--input-border);
            color: var(--text-light-grey);
            padding: 10px;
            font-size: 0.9em;
            border-radius: 6px;
        }
        
        .conversion-info {
            font-size: 0.9em;
            margin-top: 15px;
            padding: 8px;
            background-color: rgba(0, 170, 255, 0.1);
            border: 1px solid var(--text-blue);
            border-radius: 6px;
            text-align: center;
            font-weight: 500;
            color: var(--text-light-grey);
        }
        .conversion-info strong {
            color: var(--text-light-grey);
            font-weight: 700;
        }
        
        .max-jail-info {
            font-size: 0.85em;
            color: var(--alert-red);
            font-weight: 600;
            margin-top: 5px;
        }
        
        /* Ajuste do Relat√≥rio */
        .relatorio-container {
            width: 100%; 
            margin-top: 20px;
        }
        .relatorio-container textarea {
            width: 100%;
            min-height: 100px;
            resize: vertical;
        }

        /* Estilo do Rodap√© */
        .footer {
            background-color: var(--bg-deep-dark);
            color: var(--text-dark-grey);
            text-align: center;
            padding: 15px;
            font-size: 0.85em;
            border-top: 1px solid var(--border-color-dark);
            flex-shrink: 0;
            font-family: var(--main-font);
        }
        .footer strong {
            color: var(--text-light-grey);
            font-weight: 600;
        }

        /* --- MODAL DO C√ìDIGO PENAL --- */
        .modal-overlay {
            display: none; /* Escondido por padr√£o */
            position: fixed; 
            z-index: 9999; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            background-color: rgba(0,0,0,0.85); /* Fundo escuro */
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: var(--bg-dark-card);
            margin: 5% auto; 
            padding: 30px;
            border: 1px solid var(--text-blue);
            width: 80%; 
            max-width: 1000px;
            max-height: 85vh;
            overflow-y: auto;
            border-radius: 12px;
            box-shadow: 0 0 20px rgba(0, 170, 255, 0.2);
            position: relative;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-modal {
            color: var(--text-dark-grey);
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.2s;
        }
        .close-modal:hover {
            color: var(--alert-red);
        }

        .modal-header h2 {
            color: var(--text-blue);
            margin-top: 0;
            border-bottom: 2px solid var(--border-color-dark);
            padding-bottom: 15px;
            font-size: 1.8em;
        }

        /* Tabela do Modal */
        .penal-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .penal-table th, .penal-table td {
            border: 1px solid var(--border-color-dark);
            padding: 12px 15px;
            text-align: left;
        }
        .penal-table th {
            background-color: var(--crime-header-bg);
            color: var(--text-blue);
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.9em;
            position: sticky;
            top: 0;
        }
        .penal-table tr:nth-child(even) {
            background-color: rgba(255, 255, 255, 0.03);
        }
        .penal-table tr:hover {
            background-color: var(--hover-bg);
        }
        .penal-table td.cat-row {
            background-color: rgba(0, 170, 255, 0.1);
            color: var(--text-light-grey);
            font-weight: bold;
            text-align: center;
            text-transform: uppercase;
            padding: 15px;
        }
        
    </style>
</head>
<body>

<div class="main-wrapper">
    
    <div class="content-area" id="contentArea">
        
        <div class="fc quadrotopo">
            
            <div class="corp-header">
                <h2>C√≥digo Penal - ImersiON</h2>
                <span>Roleplay</span>
            </div>

            <div class="input-group-item">
                <h3>Nome do Preso</h3>
                <input type="text" placeholder="Nome do Preso..." id="preso_nome" name="preso_nome" class="form-control">
            </div>

            <div class="input-group-item">
                <h3>RG do Preso</h3>
                <input type="number" placeholder="RG do Preso..." id="preso_rg" name="preso_rg" class="form-control">
            </div>

            <div class="input-group-item">
                <h3>RG do Advogado</h3>
                <input type="number" placeholder="RG do Advogado..." id="adv_rg" name="adv_rg" class="form-control">
            </div>

            <button id="btn-open-modal" class="btn-penal">
                <i class="fas fa-book"></i> C√ìDIGO PENAL
            </button>
            
            <div class="value-display-container">
                <div class="value-row">
                    <label>Valor do Advogado (60%):</label>
                    <span id="advogado_valor">R$ 0,00</span>
                </div>
                <div class="value-row">
                    <label>Valor Resp. Policial (40%):</label>
                    <span id="policial_valor">R$ 0,00</span>
                </div>
            </div>

            <div class="social-buttons">
                <a href="https://www.instagram.com/imersionroleplay/" target="_blank" title="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.tiktok.com/@imersionrp?lang=en" target="_blank" title="TikTok">
                    <i class="fab fa-tiktok"></i>
                </a>
                <a href="https://discord.gg/imersionrp" target="_blank" title="Discord">
                    <i class="fab fa-discord"></i>
                </a>
            </div>
        </div>

        <div id="calculatorView">
            
            <div class="crime-columns">
                <div id="col1" class="fc quadro form-control body-forms">
                    <h3 style="background-color: var(--crime-header-bg);"><font>1. CRIMES CONTRA A VIDA:</font></h3>
                    <div class="checkbox-container">
                        <input id="1.1 - Homic√≠dio" type="checkbox" name="crime" value="60|12000|25000">
                        <label for="1.1 - Homic√≠dio">1.1 - Homic√≠dio</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="1.2 - Tentativa de Homic√≠dio" type="checkbox" name="crime" value="45|8000|18000">
                        <label for="1.2 - Tentativa de Homic√≠dio">1.2 - Tentativa de Homic√≠dio</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="1.3 - Chacina (2 V√≠timas)" type="checkbox" name="crime" value="60|20000|NA">
                        <label for="1.3 - Chacina (2 V√≠timas)</label>">1.3 - Chacina (2 V√≠timas)</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="1.4 - Chacina (3+ V√≠timas)" type="checkbox" name="crime" value="60|30000|NA">
                        <label for="1.4 - Chacina (3+ V√≠timas)</label>">1.4 - Chacina (3+ V√≠timas)</label>
                    </div>
                    <hr>

                    <h3 style="background-color: var(--crime-header-bg);"><font>2. DIREITOS FUNDAMENTAIS:</font></h3>
                    <div class="checkbox-container">
                        <input id="2.1 - Les√£o corporal" type="checkbox" name="crime" value="12|3000|6000">
                        <label for="2.1 - Les√£o corporal">2.1 - Les√£o corporal</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="2.2 - Sequestro" type="checkbox" name="crime" value="50|10000|20000">
                        <label for="2.2 - Sequestro">2.2 - Sequestro</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="2.3 - C√°rcere privado" type="checkbox" name="crime" value="30|6000|12000">
                        <label for="2.3 - C√°rcere privado">2.3 - C√°rcere privado</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="2.4 - Pris√£o ilegal" type="checkbox" name="crime" value="25|5000|10000">
                        <label for="2.4 - Pris√£o ilegal">2.4 - Pris√£o ilegal</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="2.5 - Prevarica√ß√£o" type="checkbox" name="crime" value="35|9000|NA">
                        <label for="2.5 - Prevarica√ß√£o">2.5 - Prevarica√ß√£o</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="2.6 - Obstru√ß√£o da justi√ßa" type="checkbox" name="crime" value="20|5000|10000">
                        <label for="2.6 - Obstru√ß√£o da justi√ßa">2.6 - Obstru√ß√£o da justi√ßa</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="2.7 - Tentativa de suborno" type="checkbox" name="crime" value="30|8000|NA">
                        <label for="2.7 - Tentativa de suborno">2.7 - Tentativa de suborno</label>
                    </div>
                    <hr>

                    <h3 style="background-color: var(--crime-header-bg);"><font>3. CRIMES CONTRA O PATRIM√îNIO:</font></h3>
                    <div class="checkbox-container">
                        <input id="3.1 - Furto" type="checkbox" name="crime" value="12|3000|6000">
                        <label for="3.1 - Furto">3.1 - Furto</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="3.2 - Tentativa de furto" type="checkbox" name="crime" value="8|1500|3000">
                        <label for="3.2 - Tentativa de furto">3.2 - Tentativa de furto</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="3.3 - Recepta√ß√£o" type="checkbox" name="crime" value="18|3500|8000">
                        <label for="3.3 - Recepta√ß√£o">3.3 - Recepta√ß√£o</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="3.4 - Furto de ve√≠culo" type="checkbox" name="crime" value="20|4000|9000">
                        <label for="3.4 - Furto de ve√≠culo">3.4 - Furto de ve√≠culo</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="3.5 - Invas√£o de im√≥vel" type="checkbox" name="crime" value="22|6000|12000">
                        <label for="3.5 - Invas√£o de im√≥vel">3.5 - Invas√£o de im√≥vel</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="3.6 - Roubo" type="checkbox" name="crime" value="30|7000|15000">
                        <label for="3.6 - Roubo">3.6 - Roubo</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="3.7 - Roubo/Furto de viatura" type="checkbox" name="crime" value="30|10000|20000">
                        <label for="3.7 - Roubo/Furto de viatura">3.7 - Roubo/Furto de viatura</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="3.8 - Estabelecimento irregular" type="checkbox" name="crime" value="6|2000|5000">
                        <label for="3.8 - Estabelecimento irregular">3.8 - Estabelecimento irregular</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="3.9 - Falsifica√ß√£o de alvar√°" type="checkbox" name="crime" value="24|6000|12000">
                        <label for="3.9 - Falsifica√ß√£o de alvar√°">3.9 - Falsifica√ß√£o de alvar√°</label>
                    </div>
                    <hr>
                </div>

                <div id="col2" class="fc quadro form-control body-forms">
                    <h3 style="background-color: var(--crime-header-bg);"><font>4. ROUBO, EXTORS√ÉO E ESTELIONATO:</font></h3>
                    <div class="checkbox-container">
                        <input id="4.1 - Assalto" type="checkbox" name="crime" value="24|6000|12000">
                        <label for="4.1 - Assalto">4.1 - Assalto</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="4.2 - Extors√£o" type="checkbox" name="crime" value="30|7000|15000">
                        <label for="4.2 - Extors√£o">4.2 - Extors√£o</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="4.3 - Furto a caixa eletr√¥nico" type="checkbox" name="crime" value="35|8000|18000">
                        <label for="4.3 - Furto a caixa eletr√¥nico">4.3 - Furto a caixa eletr√¥nico</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="4.4 - Estelionato simples" type="checkbox" name="crime" value="18|4000|8000">
                        <label for="4.4 - Estelionato simples">4.4 - Estelionato simples</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="4.5 - Golpe financeiro" type="checkbox" name="crime" value="24|6000|12000">
                        <label for="4.5 - Golpe financeiro">4.5 - Golpe financeiro</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="4.6 - Golpe banc√°rio" type="checkbox" name="crime" value="30|8000|18000">
                        <label for="4.6 - Golpe banc√°rio">4.6 - Golpe banc√°rio</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="4.7 - Estelionato em massa" type="checkbox" name="crime" value="40|12000|25000">
                        <label for="4.7 - Estelionato em massa">4.7 - Estelionato em massa</label>
                    </div>
                    <hr>

                    <h3 style="background-color: var(--crime-header-bg);"><font>5. ARMAS E MUNI√á√ïES:</font></h3>
                    <div class="checkbox-container">
                        <input id="5.1 - Porte de arma leve" type="checkbox" name="crime" value="20|5000|12000">
                        <label for="5.1 - Porte de arma leve">5.1 - Porte de arma leve</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="5.2 - Porte de arma pesada" type="checkbox" name="crime" value="35|10000|20000">
                        <label for="5.2 - Porte de arma pesada">5.2 - Porte de arma pesada</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="5.3 - Tr√°fico de armas" type="checkbox" name="crime" value="50|15000|30000">
                        <label for="5.3 - Tr√°fico de armas">5.3 - Tr√°fico de armas</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="5.4 - Posse de muni√ß√£o (-250)" type="checkbox" name="crime" value="10|2000|5000">
                        <label for="5.4 - Posse de muni√ß√£o (-250)">5.4 - Posse de muni√ß√£o (-250)</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="5.5 - Tr√°fico de muni√ß√£o (+250)" type="checkbox" name="crime" value="24|7000|15000">
                        <label for="5.5 - Tr√°fico de muni√ß√£o (+250)">5.5 - Tr√°fico de muni√ß√£o (+250)</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="5.6 - Posse de arma branca" type="checkbox" name="crime" value="6|1000|3000">
                        <label for="5.6 - Posse de arma branca">5.6 - Posse de arma branca</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="5.7 - Posse de material ilegal" type="checkbox" name="crime" value="16|4000|8000">
                        <label for="5.7 - Posse de material ilegal">5.7 - Posse de material ilegal</label>
                    </div>
                    <hr>

                    <h3 style="background-color: var(--crime-header-bg);"><font>6. NARCOTR√ÅFICO:</font></h3>
                    <div class="checkbox-container">
                        <input id="6.1 - Posse de drogas (1-6)" type="checkbox" name="crime" value="0|0|0">
                        <label for="6.1 - Posse de drogas (1-6)">6.1 - Posse de drogas (1-6)</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="6.2 - Tr√°fico de drogas" type="checkbox" name="crime" value="45|12000|25000">
                        <label for="6.2 - Tr√°fico de drogas">6.2 - Tr√°fico de drogas</label>
                    </div>
                    <hr>

                    <h3 style="background-color: var(--crime-header-bg);"><font>7. CRIMES CIBERN√âTICOS:</font></h3>
                    <div class="checkbox-container">
                        <input id="7.1 - Invas√£o de sistema" type="checkbox" name="crime" value="20|5000|10000">
                        <label for="7.1 - Invas√£o de sistema">7.1 - Invas√£o de sistema</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="7.2 - Clonagem de celular" type="checkbox" name="crime" value="18|4000|8000">
                        <label for="7.2 - Clonagem de celular">7.2 - Clonagem de celular</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="7.3 - Fraude digital" type="checkbox" name="crime" value="24|6000|12000">
                        <label for="7.3 - Fraude digital">7.3 - Fraude digital</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="7.4 - Uso de software ilegal" type="checkbox" name="crime" value="14|3000|6000">
                        <label for="7.4 - Uso de software ilegal">7.4 - Uso de software ilegal</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="7.5 - Vazamento de dados" type="checkbox" name="crime" value="30|8000|18000">
                        <label for="7.5 - Vazamento de dados">7.5 - Vazamento de dados</label>
                    </div>
                    <hr>
                </div>

                <div id="col3" class="fc quadro form-control body-forms">
                    <h3 style="background-color: var(--crime-header-bg);"><font>8. RELA√á√ïES CONJUGAIS:</font></h3>
                    <div class="checkbox-container">
                        <input id="8.1 - Agress√£o conjugal" type="checkbox" name="crime" value="20|4000|8000">
                        <label for="8.1 - Agress√£o conjugal">8.1 - Agress√£o conjugal</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="8.2 - Les√£o conjugal" type="checkbox" name="crime" value="30|6000|12000">
                        <label for="8.2 - Les√£o conjugal">8.2 - Les√£o conjugal</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="8.3 - Amea√ßa conjugal" type="checkbox" name="crime" value="14|3000|6000">
                        <label for="8.3 - Amea√ßa conjugal">8.3 - Amea√ßa conjugal</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="8.4 - Persegui√ß√£o (stalking)" type="checkbox" name="crime" value="22|5000|10000">
                        <label for="8.4 - Persegui√ß√£o (stalking)">8.4 - Persegui√ß√£o (stalking)</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="8.5 - C√°rcere privado conjugal" type="checkbox" name="crime" value="40|8000|18000">
                        <label for="8.5 - C√°rcere privado conjugal">8.5 - C√°rcere privado conjugal</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="8.6 - Estelionato conjugal" type="checkbox" name="crime" value="28|7000|15000">
                        <label for="8.6 - Estelionato conjugal">8.6 - Estelionato conjugal</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="8.7 - Tentativa de homic√≠dio conjugal" type="checkbox" name="crime" value="45|10000|20000">
                        <label for="8.7 - Tentativa de homic√≠dio conjugal">8.7 - Tent. Homic√≠dio conjugal</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="8.8 - Homicidio conjugal" type="checkbox" name="crime" value="60|15000|NA">
                        <label for="8.8 - Homicidio conjugal">8.8 - Homicidio conjugal</label>
                    </div>
                    <hr>

                    <h3 style="background-color: var(--crime-header-bg);"><font>9. ORDEM P√öBLICA:</font></h3>
                    <div class="checkbox-container">
                        <input id="9.1 - Amea√ßa" type="checkbox" name="crime" value="10|2000|5000">
                        <label for="9.1 - Amea√ßa">9.1 - Amea√ßa</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="9.2 - Desobedi√™ncia" type="checkbox" name="crime" value="8|1500|3000">
                        <label for="9.2 - Desobedi√™ncia">9.2 - Desobedi√™ncia</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="9.3 - Vandalismo" type="checkbox" name="crime" value="12|3500|3500">
                        <label for="9.3 - Vandalismo">9.3 - Vandalismo</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="9.4 - Dano ao patrim√¥nio p√∫blico" type="checkbox" name="crime" value="18|4000|8000">
                        <label for="9.4 - Dano ao patrim√¥nio p√∫blico">9.4 - Dano ao patrim√¥nio p√∫blico</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="9.5 - Abuso de autoridade" type="checkbox" name="crime" value="30|6000|12000">
                        <label for="9.5 - Abuso de autoridade">9.5 - Abuso de autoridade</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="9.6 - Uso de m√°scara" type="checkbox" name="crime" value="10|3000|6000">
                        <label for="9.6 - Uso de m√°scara">9.6 - Uso de m√°scara</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="9.7 - Uso de equipamento restrito" type="checkbox" name="crime" value="20|5000|10000">
                        <label for="9.7 - Uso de equipamento restrito">9.7 - Uso de equipamento restrito</label>
                    </div>
                    <hr>

                    <h3 style="background-color: var(--crime-header-bg);"><font>10. TR√ÇNSITO (CTB):</font></h3>
                    <div class="checkbox-container">
                        <input id="10.1 - Tentativa de fuga" type="checkbox" name="crime" value="14|3000|8000">
                        <label for="10.1 - Tentativa de fuga">10.1 - Tentativa de fuga</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="10.2 - Corridas ilegais" type="checkbox" name="crime" value="20|6000|NA">
                        <label for="10.2 - Corridas ilegais">10.2 - Corridas ilegais</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="10.3 - Homic√≠dio culposo no tr√¢nsito" type="checkbox" name="crime" value="25|6000|15000">
                        <label for="10.3 - Homic√≠dio culposo no tr√¢nsito">10.3 - Homic. culposo no tr√¢nsito</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="10.4 - Tentativa de homic√≠dio no tr√¢nsito" type="checkbox" name="crime" value="30|7000|18000">
                        <label for="10.4 - Tent. homic√≠dio no tr√¢nsito">10.4 - Tent. homic√≠dio no tr√¢nsito</label>
                    </div>
                    <hr>

                    <h3 style="background-color: var(--crime-header-bg);"><font>AGRAVANTES:</font></h3>
                    <div class="checkbox-container">
                        <input id="14.1 - Desacato a autoridade" type="checkbox" name="crime" value="5|1400|4000">
                        <label for="14.1 - Desacato a autoridade">14.1 - Desacato a autoridade</label>
                    </div>
                    <div class="checkbox-container">
                        <input id="14.2 - Resist√™ncia a Pris√£o" type="checkbox" name="crime" value="5|3000|8000">
                        <label for="14.2 - Resist√™ncia a Pris√£o">14.2 - Resist√™ncia a Pris√£o</label>
                    </div>
                    <hr>
                </div>
            </div>

            <div class="quadro result-column">
                <h3 style="font-size: 30px; font-weight: 400; font-style: oblique; color: var(--text-blue);">CALCULADORA</h3>
                
                <div class="conversion-info">
                    <strong>10 Meses (no jogo) = 60 Minutos (vida real)</strong>
                    <p class="max-jail-info" style="color: var(--text-dark-grey); margin-top: 5px;">
                        (Pena m√°xima de 60 meses aplicada)
                    </p>
                    <p class="max-jail-info" style="color: var(--alert-red); margin-top: 5px;">
                        Se a Lei de Miranda n√£o for lida, anula toda opera√ß√£o
                    </p>
                </div>
                
                <h4>‚öñÔ∏è PENA:</h4>
                <input type="text" id="pena" name="pena" class="form-control" readonly="true">
                <div class="max-jail-info" id="max-jail-info" style="display: none">
                    * PENA M√ÅXIMA (60 MESES) EXCEDIDA
                </div>
                
                <h4>üí∏ MULTA:</h4>
                <input type="text" id="multa" name="multa" class="form-control" readonly="true">
                
                <h4>üí∞ FIAN√áA:</h4>
                <input type="text" id="fianca" name="fianca" class="form-control" readonly="true">
                <input hidden="" id="fianca-hidden">
                <br>

                <button class="btn btn-danger" style="background-color: var(--original-red);" id="limpar-calc">
                    <i class="fas fa-trash" style="color: #fff; font-size: 20px;"></i> <span>LIMPAR</span>
                </button>
                <hr>
                
                <h3 style="font-size: 18px;">FICHA CRIMINAL:</h3>
                <textarea rows="10" cols="50" style="resize: none" readonly="true" maxlength="500" id="copy-text" class="TextoArtigos form-control"></textarea>

                <br>
                <button class="btn btn-success" style="background-color: #00c003;" id="copy-btn">
                    <i class="fas fa-clipboard" style="color: #fff; font-size: 20px;"></i> <span>COPIAR PARA DISCORD</span>
                </button>
                
                <hr>
                <h3>ATENUANTES:</h3>
                <div style="font-size: 15px;">
                    <input type="checkbox" class="form-check-input side-checkboxes" id="advogado-30" name="advogado-30" value="30"> Advogado constitu√≠do: <span style="color:#FFF">Redu√ß√£o obrigat√≥ria de 30%</span>
                    
                    <div class="col col-md-12 advogado-1" style="display: none; margin-top: 10px;">
                        <h4 style="font-size: 15px; color: var(--original-red);">
                            <input id="reu-primario" type="checkbox" class="form-check-input side-checkboxes" value="50" name="reu-primario"> R√©u prim√°rio: <span style="color:#FFF">Redu√ß√£o de 50% na pena corrente.</span>
                        </h4>
                    </div>

                    <div class="col col-md-12 advogado-2" style="display: none; margin-top: 10px;">
                        <h4 style="font-size: 15px; color: var(--original-red);">
                            <input id="reu-confesso" type="checkbox" class="form-check-input side-checkboxes" value="15" name="reu-confesso"> R√©u confesso: <span style="color:#FFF">Redu√ß√£o de 15% na pena corrente.</span>
                        </h4>
                    </div>
                </div>
                <hr style="margin-bottom: 10px;">
                
                <div style="font-size: 15px; margin-top: 5px;">
                    <input type="checkbox" class="form-check-input side-checkboxes" id="oac-checkbox" name="oac-checkbox" value="100"> POSSUI OAC: <span style="color:#FFF">Aumento obrigat√≥rio de 100%</span>
                </div>
                <hr style="margin-top: 20px;">
                
                <h3 style="font-size: 18px;">RELAT√ìRIO:</h3>
                <div class="relatorio-container">
                    <textarea rows="5" id="relatorio_content" class="form-control" placeholder="Detalhes do RP, atenuantes do advogado, nome do policial respons√°vel, etc..."></textarea>
                </div>
            </div>
            
        </div>
        
    </div>
    
</div>

<div id="modalPenalCode" class="modal-overlay">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <div class="modal-header">
            <h2>Tabela Completa - C√≥digo Penal</h2>
        </div>
        <div id="modalBody">
            </div>
    </div>
</div>

<footer class="footer">
    Autor <strong>Nox</strong>, todos direitos reservados - 2025.
</footer>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const crimeCheckboxes = document.querySelectorAll('.crime-columns input[type="checkbox"]');
        const allCheckboxes = document.querySelectorAll('input[type="checkbox"]');
        const limparCalcBtn = document.getElementById('limpar-calc');
        const copyBtn = document.getElementById('copy-btn');
        const penaInput = document.getElementById('pena');
        const multaInput = document.getElementById('multa');
        const fiancaInput = document.getElementById('fianca');
        const copyTextarea = document.getElementById('copy-text');
        const maxJailInfo = document.getElementById('max-jail-info');
        
        // Inputs de preenchimento
        const nomePresoInput = document.getElementById('preso_nome');
        const rgPresoInput = document.getElementById('preso_rg');
        const rgAdvogadoInput = document.getElementById('adv_rg');
        const relatorioInput = document.getElementById('relatorio_content');
        const oacCheckbox = document.getElementById('oac-checkbox');

        // Novos campos de exibi√ß√£o de valor
        const advogadoValorSpan = document.getElementById('advogado_valor');
        const policialValorSpan = document.getElementById('policial_valor');

        // Constantes de Regra
        const MINUTES_PER_MONTH_SCALE = 6; // 1 M√™s = 6 Minutos (60 / 10)
        const MAX_PENALTY_MONTHS = 60; 
        const INAFIANCAVEL_TEXT = "INAFIAN√á√ÅVEL";
        const ADVOGADO_PERCENTAGE = 0.60; // 60%
        const POLICIAL_PERCENTAGE = 0.40; // 40%

        const formatCurrency = (value) => {
            // Formata para R$ X.XXX,XX
            return `R$ ${value.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
        };

        // Fun√ß√£o moderna e confi√°vel para copiar texto
        const copyToClipboard = async (text) => {
            try {
                await navigator.clipboard.writeText(text);
                alert('Copiado com sucesso! Utilize o template no Discord.');
            } catch (err) {
                console.error('Falha ao copiar:', err);
                const isiOS = navigator.userAgent.match(/ipad|ipod/i);
                if (isiOS) {
                    copyTextarea.select();
                    copyTextarea.setSelectionRange(0, 99999);
                    document.execCommand("copy");
                    alert('Copiado (Fallback iOS)! Utilize o template no Discord.');
                } else {
                    alert('Erro ao copiar. O texto da Ficha Criminal foi selecionado para c√≥pia manual.');
                    copyTextarea.select();
                }
            }
        };

        const updateCalculation = () => {
            let totalPenaMonths = 0;
            let totalMulta = 0;
            let totalFianca = 0;
            let hasInafiancavel = false;
            let crimesSelecionados = [];
            let atenuantesList = [];

            crimeCheckboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    const [penaStr, multaStr, fiancaStr] = checkbox.value.split('|');
                    const pena = parseInt(penaStr) || 0; // Pena original (em Meses RP do index.html)
                    const multa = parseInt(multaStr) || 0;
                    
                    totalPenaMonths += pena;
                    totalMulta += multa;

                    if (fiancaStr.toUpperCase() === 'NA') {
                        hasInafiancavel = true;
                    } else {
                        totalFianca += parseInt(fiancaStr) || 0;
                    }

                    crimesSelecionados.push(checkbox.id);
                }
            });
            
            // --- Aplica√ß√£o dos Atenuantes ---
            let penaFinalMonths = totalPenaMonths;
            let multaFinal = totalMulta;
            
            const advConst = document.getElementById('advogado-30').checked;
            const reuPrimarioEl = document.getElementById('reu-primario');
            const reuConfessoEl = document.getElementById('reu-confesso');

            // 1. L√≥gica de Atenuantes (Exibi√ß√£o e C√°lculo)
            document.querySelectorAll('.advogado-1, .advogado-2').forEach(el => {
                el.style.display = advConst ? 'block' : 'none';
            });
            
            if (advConst) {
                // 30% de redu√ß√£o (Pena = Pena * 0.70)
                penaFinalMonths = Math.ceil(penaFinalMonths * 0.70); 
                atenuantesList.push("Advogado Constitu√≠do (Redu√ß√£o de 30%)");

                if (reuPrimarioEl.checked) {
                    penaFinalMonths = Math.ceil(penaFinalMonths * 0.50); 
                    atenuantesList.push("R√©u Prim√°rio (Redu√ß√£o de 50%)");
                }
                
                if (reuConfessoEl.checked) {
                    penaFinalMonths = Math.ceil(penaFinalMonths * 0.85); 
                    atenuantesList.push("R√©u Confesso (Redu√ß√£o de 15%)");
                }
            }

            // 2. POSSUI OAC (100% de aumento na pena)
            if (oacCheckbox && oacCheckbox.checked) {
                 penaFinalMonths = Math.ceil(penaFinalMonths * 2.0); // Aumento em 100% (mult*2)
                 atenuantesList.push("POSSUI OAC (Aumento de 100%)");
            }
            
            // Aplicar o limite m√°ximo de pena
            const penaExceeded = penaFinalMonths > MAX_PENALTY_MONTHS;
            if (penaExceeded) {
                penaFinalMonths = MAX_PENALTY_MONTHS;
            }
            maxJailInfo.style.display = penaExceeded ? 'block' : 'none';
            
            // 3. L√≥gica da Fian√ßa (Exibi√ß√£o)
            let fiancaDisplay;
            let fiancaValue = totalFianca;

            if (hasInafiancavel) {
                fiancaDisplay = INAFIANCAVEL_TEXT;
                fiancaValue = 0; // Zera o valor da fian√ßa para c√°lculo de 60%/40%
            } else if (totalFianca > 0) {
                fiancaDisplay = formatCurrency(totalFianca);
            } else if (multaFinal > 0) {
                // Se fian√ßa for 0, mas houver multa, cobra o valor da multa.
                fiancaValue = multaFinal;
                fiancaDisplay = formatCurrency(multaFinal);
            } else {
                fiancaDisplay = formatCurrency(0);
            }
            
            if (crimesSelecionados.length === 0) {
                fiancaDisplay = formatCurrency(0);
                fiancaValue = 0;
            }

            // 4. C√ÅLCULO DOS VALORES DE DISTRIBUI√á√ÉO (60% / 40%)
            const valorAdvogado = fiancaValue * ADVOGADO_PERCENTAGE;
            const valorPolicial = fiancaValue * POLICIAL_PERCENTAGE;
            
            // Atualiza os inputs de resultados
            const penaFinalRealMinutes = penaFinalMonths * MINUTES_PER_MONTH_SCALE; 
            penaInput.value = penaFinalMonths > 0 ? `${penaFinalMonths} Meses (${penaFinalRealMinutes} Min)` : '0 Meses';
            multaInput.value = formatCurrency(multaFinal);
            fiancaInput.value = fiancaDisplay;
            
            // Atualiza os campos de distribui√ß√£o no cabe√ßalho
            advogadoValorSpan.textContent = formatCurrency(valorAdvogado);
            policialValorSpan.textContent = formatCurrency(valorPolicial);

            // --- Gera√ß√£o do texto de c√≥pia ---
            const atenuantesText = atenuantesList.length > 0 ? atenuantesList.join(', ') : 'Nenhum';
            const crimesSequencia = crimesSelecionados.map(crime => `- ${crime}`).join('\n');
            const nomePreso = nomePresoInput.value.trim() || 'N/A';
            const rgPreso = rgPresoInput.value.trim() || 'N/A';
            const rgAdvogado = rgAdvogadoInput.value.trim() || 'N/A';
            const relatorio = relatorioInput.value.trim() || 'N/A';
            
            const discordTemplate = `# Ficha Criminal 

**Nome:** ${nomePreso}
**RG do Preso:** ${rgPreso}
**Observa√ß√£o:**
**Crimes:**
${crimesSequencia}

**Pena Total:** ${penaInput.value}
**Multa:** ${multaInput.value}
**Fian√ßa:** ${fiancaInput.value}

**Atenuantes:** ${atenuantesText}

**RG do Advogado:** ${rgAdvogado}
**Fian√ßa paga?:** (PREENCHER)

**Policial Respons√°vel:** (PREENCHER)
**Policiais Envolvidos:** (PREENCHER)

**Relat√≥rio:** ${relatorio}
`;

            copyTextarea.value = discordTemplate;
        };

        // --- Inicializa√ß√£o de Listeners ---
        
        limparCalcBtn.addEventListener('click', () => {
            allCheckboxes.forEach(cb => cb.checked = false);
            nomePresoInput.value = '';
            rgPresoInput.value = '';
            rgAdvogadoInput.value = '';
            relatorioInput.value = '';
            updateCalculation();
        });

        // Adiciona listener de mudan√ßa para todos os inputs/checkboxes (o cora√ß√£o do c√°lculo)
        allCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateCalculation);
        });

        nomePresoInput.addEventListener('input', updateCalculation);
        rgPresoInput.addEventListener('input', updateCalculation);
        rgAdvogadoInput.addEventListener('input', updateCalculation);
        relatorioInput.addEventListener('input', updateCalculation);
        
        // Fun√ß√£o de c√≥pia ativada pelo bot√£o
        copyBtn.addEventListener('click', () => {
             copyToClipboard(copyTextarea.value);
        });

        // --- L√ìGICA DO MODAL C√ìDIGO PENAL ---
        const modal = document.getElementById("modalPenalCode");
        const btnModal = document.getElementById("btn-open-modal");
        const spanClose = document.querySelector(".close-modal");
        const modalBody = document.getElementById("modalBody");

        // Fun√ß√£o para gerar a tabela automaticamente baseada nos checkboxes existentes
        function generatePenalTable() {
            let tableHTML = `<table class="penal-table">
                                <thead>
                                    <tr>
                                        <th>Artigo / Crime</th>
                                        <th>Pena (Meses)</th>
                                        <th>Multa</th>
                                        <th>Fian√ßa</th>
                                    </tr>
                                </thead>
                                <tbody>`;
            
            // Varre as 3 colunas de crimes
            const colunas = document.querySelectorAll('.crime-columns .body-forms');
            
            colunas.forEach(coluna => {
                // Pega os elementos filhos (h3 e checkbox-container)
                const elementos = coluna.children;
                
                for (let el of elementos) {
                    if (el.tagName === 'H3') {
                        // T√≠tulo da Categoria
                        const categoriaTitulo = el.textContent.replace(':', '');
                        tableHTML += `<tr><td colspan="4" class="cat-row">${categoriaTitulo}</td></tr>`;
                    } else if (el.classList.contains('checkbox-container')) {
                        // √â um crime
                        const input = el.querySelector('input');
                        const label = el.querySelector('label').textContent;
                        const values = input.value.split('|');
                        
                        const pena = values[0] + " Meses";
                        const multa = parseInt(values[1]).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
                        let fianca = "R$ 0,00";
                        
                        if(values[2] === "NA") {
                            fianca = "<span style='color:var(--alert-red); font-weight:bold;'>INAFIAN√á√ÅVEL</span>";
                        } else if(parseInt(values[2]) > 0) {
                             fianca = parseInt(values[2]).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
                        } else if (parseInt(values[1]) > 0) {
                             // Se fian√ßa for 0 na config, mas tem multa, a fian√ßa √© a multa (l√≥gica do script principal)
                             fianca = parseInt(values[1]).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
                        }
                        
                        tableHTML += `<tr>
                                        <td><strong>${label}</strong></td>
                                        <td>${pena}</td>
                                        <td>${multa}</td>
                                        <td>${fianca}</td>
                                      </tr>`;
                    }
                }
            });

            tableHTML += `</tbody></table>`;
            modalBody.innerHTML = tableHTML;
        }

        btnModal.onclick = function() {
            generatePenalTable(); // Gera a tabela sempre que abrir para garantir dados atualizados
            modal.style.display = "block";
        }

        spanClose.onclick = function() {
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        // Chamada inicial (para preencher campos vazios)
        updateCalculation(); 
    });
</script>

</body>
</html>
